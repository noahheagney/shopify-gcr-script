import { useContext } from 'react';
import { CheckoutUIExtensionError } from '../errors.esnext';
import { ExtensionApiContext } from '../context.esnext';

/**
 * Returns the full API object that was passed in to your extension when it was created.
 * Depending on the extension point, this object can contain different properties.
 *
 * For example, the `Checkout::CartLineDetails::RenderAfter` extension point will return the [CartLineDetailsApi](https://shopify.dev/docs/api/checkout-ui-extensions/apis/cartlinedetailsapi) object.
 * Whereas others return the [StandardApi](https://shopify.dev/docs/api/checkout-ui-extensions/apis/standardapi) object.
 *
 * For reference, see [ExtensionPoints](https://shopify.dev/docs/api/checkout-ui-extensions/apis/extensionpoints) to determine what API object will be returned by your extension point.
 */
function useApi(_id) {
  const api = useContext(ExtensionApiContext);
  if (api == null) {
    throw new CheckoutUIExtensionError('You can only call this hook when running as a UI extension.');
  }
  return api;
}

/**
 * Returns the full API object that was passed in to your extension when it was created.
 * Depending on the extension point, this object can contain different properties.
 *
 * For example, the `Checkout::CartLineDetails::RenderAfter` extension point will return the [CartLineDetailsApi](https://shopify.dev/docs/api/checkout-ui-extensions/apis/cartlinedetailsapi) object.
 * Whereas others return the [StandardApi](https://shopify.dev/docs/api/checkout-ui-extensions/apis/standardapi) object.
 *
 * For reference, see [ExtensionPoints](https://shopify.dev/docs/api/checkout-ui-extensions/apis/extensionpoints) to determine what API object will be returned by your extension point.
 */
function useExtensionApi() {
  return useApi();
}

export { useApi, useExtensionApi };
